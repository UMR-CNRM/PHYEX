<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PHYEX: INSTALLATION NEEDED FOR MESONH COMPILATION WITH PHYEX</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PHYEX
   </div>
   <div id="projectbrief">PHYsique EXternalis√©e</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">INSTALLATION NEEDED FOR MESONH COMPILATION WITH PHYEX </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md94"></a>
ABOUT THIS DOCUMENT</h1>
<p>This document is intended for persons who want to compile the MESONH model using the PHYEX package. The installation described here is also needed in order to use the check_commit_mesonh.sh script which enable to check if a given commit reproduces a reference version.</p>
<p>This document is written using the markdown language. With pandoc, it can be converted to HTML (pandoc -s &lt;filename&gt;.md -o &lt;filename&gt;.html) or PDF (pandoc -V geometry:landscape -s &lt;filename&gt;.md -o &lt;filename&gt;.pdf).</p>
<p>The directory in which the repository lies is designated by the TRUNK variable. The $TRUNK dir can be put on a shared directory to share this installation among several users.</p>
<h1><a class="anchor" id="autotoc_md95"></a>
COMPILATION OF THE MASTER</h1>
<p>An official version of Meso-Nh is installed in the pack directory:</p>
<div class="fragment"><div class="line">cd $TRUNK/tools/pack</div>
<div class="line">scp sxphynh.cnrm.meteo.fr:/home/rodierq/MNH-V5-5-0.tar.gz . #For MF users, can be retrieve on the Meso-NH website</div>
<div class="line">tar xvfz MNH-V5-5-0.tar.gz</div>
<div class="line">cd MNH-V5-5-0/src</div>
<div class="line">./configure</div>
<div class="line">. ../conf/profile_mesonh-*</div>
<div class="line">make -j 8</div>
<div class="line">make installmaster</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md96"></a>
PREPROCESSING STEPS FOR THE TEST CASE</h1>
<p>The preprocessing steps must be done at least once on the master pack:</p>
<div class="fragment"><div class="line">cd ../MY_RUN/KTEST/007_16janvier</div>
<div class="line">#The official namelist can be modified to enable more options</div>
<div class="line">rm -Rf 008_run2; scp -r sxphynh.cnrm.meteo.fr:/home/rodierq/MNH-V5-5-0/MY_RUN/KTEST/007_16janvier/008_run2 .</div>
<div class="line"> </div>
<div class="line">make clean</div>
<div class="line">make #the step #10 succeed only if a isplay (X11) is available</div>
<div class="line">     #after the error, the next steps can be executed by &quot;make E011_ncl E012_spectre&quot;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md97"></a>
GET A MODIFIED PACK SUITABLE FOR PHYEX</h1>
<p>The master pack cannot be used directly to compile Meso-NH using PHYEX, the Makefile must be modified </p><div class="fragment"><div class="line">cd $TRUNK/pack</div>
<div class="line">scp sxphynh.cnrm.meteo.fr:/home/rodierq/MNH-V5-5-0_PHYEX.tar.gz .</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md98"></a>
MESONH COMPILATION WITH PHYEX</h1>
<p>To compile MESONH using the PHYEX package, some manipulation is needed. The easiest way is to use the check_commit_mesonh.sh script.</p>
<h1><a class="anchor" id="autotoc_md99"></a>
COMPARISON OF SOME COMMITS</h1>
<p>Some commits doesn't reproduce the reference commit but are comparable to the b1e20 commit. If someone is interested in compiling this commit, the argument order of the functions DZM_MF, MZM_MF, GZ_M_W_MF must be reversed in compute_bl89_ml, tridiag_massflux.f90 and shuman_mf.f90 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
